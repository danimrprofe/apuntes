<!DOCTYPE html>
<html>
<head>
<title>index.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="pong">Pong</h1>
<h2 id="01-unity">01. Unity</h2>
<p><img src="file:///e:/Docencia/apuntes/docs/unity/img/2022-10-13-00-34-17.png" alt="imagen"></p>
<p>Estos días estamos dedicando las sesiones a trabajar el desarrollo de videojuegos. Para ello utilizamos el motor <code>Unity</code>, que nos permite crear proyectos 2D y 3D.</p>
<p>Hemos seguido los tutoriales del usuario Luiscanary, para poder desarrollar los proyectos de Pong y un juego de plataformas 2D. A través de estos proyectos hemos aprendido a:</p>
<ul>
<li>Crear objetos de sprite 2D y colocarlos en escena</li>
<li>Programar scripts que, asignados a los objetos, controlen su comportamiento</li>
<li>Utilizar controles de teclado para mover los objetos</li>
<li>Asignar componentes rigidbody para agregar respuesta a físicas en nuestros sprites</li>
<li>Agregar colliders a los objetos para controlar las colisiones entre ellos y modificar el comportamiento del juego.</li>
</ul>
<p><img src="file:///e:/Docencia/apuntes/docs/unity/media/image2.png" alt="imagen"></p>
<h2 id="02-instalaci%C3%B3n">02. Instalación</h2>
<h2 id="03-crear-un-proyecto">03. Crear un proyecto</h2>
<p>Vamos a seleccionar lo importante es el template 2d que básicamente vamos a hacer el juego en 2d</p>
<p><img src="file:///e:/Docencia/apuntes/docs/unity/media/image1.png" alt="imagen"></p>
<p>El proyecto el nombre pues le ponéis el que queráis yo los voy a poner por tutorial de hecho ya lo tengo creado así que no me dejaba ponerle el mismo nombre y seleccionar pues una localización y cuando lo tenga listo pues le das a create</p>
<h2 id="04-crear-pelota">04. Crear pelota</h2>
<p>Dentro de nuestra ventana lo que vamos a hacer es clic derecho y darle a judíos el spritesquare y como veis pues directamente seme pone pues un cuadrado que es el quevamos a utilizar para la bola.</p>
<p>Para los jugadores para las paredes para todoporque vamos a poder pues escalarlo enlos diferentes ejes y pues nos va aayudar a crear por como comentó el juegoen sí vamos a necesitar ni bajarnosninguna se ni nada va a ser todochocaron aquí en juniti así que buenogenera seguido un primer momento vamos acrear las paredes de arriba y de abajoentonces para ello</p>
<ol>
<li>Vamos a la escala y vamos a colocarla en el eje x alo que sería un valor de 18</li>
<li>Ahora vamos a colocarlo en la posición 0 y 0 en el eje x y y</li>
<li>Ahora lo que vamos ahacer es subirlo hacia arriba para ello</li>
<li>También podéis pulsar +w+ cuando tengáis este objeto seleccionado y entonces pues podréis moverlo en ese eje en específico.</li>
</ol>
<h2 id="cambiar-resoluci%C3%B3n">Cambiar resolución</h2>
<p>Vamos a cambiar la <code>resolución</code> por la típica que se utiliza en pantallas que es la <strong>16:9</strong> que está se adapta muy bien pues ahora que es 1080 720 dos cada4 acá en ese caso que es la resolución este vertical y horizontal porque mantiene un aspecto de relación que cuadra en ese sentido entonces cuando como veis si yo creo a 18 y pongo esto en la posición de y a 4.5 queda perfectoahí en su posición de hecho es lo quevoy a hacer es ponerlo a 5 ya poner un poco más arriba a mí me gusta más que se vea pero que tampoco me ocupe pues media pantalla esa pared perfecto</p>
<p>Podemos <code>duplicar</code> un objeto en lugar de crear uno nuevo. este que tenemos y ponerlo pues abajo del todo para ello pues lo que podéis hacer es control de o <code>clic derecho &gt; duplicate</code> se duplicará y ahora lo único que tenemos que hacer es en vez de ir arrastrando lo va a estar en la posición contraria a 5 en este caso pues sería menos 5 a esta</p>
<h2 id="05-sprites">05. Sprites</h2>
<p>Un <code>sprite</code> es una imagen bidimensional que se utiliza como elemento gráfico en un videojuego. Se dibuja con herramientas de gráficos vectoriales o bitmap y se usa para representar personajes, objetos, entornos o cualquier otra imagen.</p>
<p>En <code>Unity</code>, los sprites se usan para crear gráficos 2D, como personajes, fondos, objetos y cualquier otra imagen que se use en un juego 2D. Estos sprites se pueden importar directamente desde un archivo de imagen o se pueden crear desde cero usando <code>Unity</code>.</p>
<p>Los sprites se almacenan en el formato .PNG y se pueden manipular fácilmente en <code>Unity</code>. Los sprites se pueden mover, girar, escalar y rotar fácilmente con <code>Unity</code>. También se pueden usar para crear animaciones y efectos especiales.</p>
<p><img src="file:///e:/Docencia/apuntes/docs/unity/img/2023-02-07-15-58-21.png" alt=""></p>
<p>Todos los objetos por defecto tienen una posición y un tamaño. Esto se cambia en el <code>componente Transform</code></p>
<h2 id="06-crear-paredes-de-los-lados">06. Crear paredes de los lados</h2>
<p>Para ello pues igual voy a <code>duplicar</code> el objeto y ahora lo que pasa esque mi escala en el eje x no va a ser sino que va a ser en el eje y entonces en este caso puedo dejar la escala en el eje x a1 y la escala en el eje y a</p>
<p>Si pulsáis la <code>rueda</code> del ratón podéis hacer una especie de <code>paneo</code>.</p>
<p>Ahora lo que quedaría es ponerlo a la derecha y ala izquierda entonces en este caso lo que vamos a hacer es poner en la posición de y a 0 y aquí vamos a modificar la posición en el eje x en este caso la podemos poner por ejemplo en ocho y más o menos vemos que se queda cerca de lo que sería pero estas paredes no se tienen que ver tienen que estar por la parte de fuera</p>
<p>Vamos a colocar pues por ejemplo ahí lo quesería pues yo creo que el nueve y medio va bien estas paredes van a ser diferentes a esta nueva entre colisión en el hecho de que no van a hacer que rebote la pelota sino que cuando colisionan con esta pared va a ser como la portería de un jugador o del otro y entonces pues se añadirá un punto cuando colisiones perfecto</p>
<p>Podemos <code>duplicar</code> el objeto. y ponerlo en el lado contrario que simplemente poniéndole un negativo en el 9,5 pues se pondrá justo en el otro lado.</p>
<h2 id="07-nombrando-los-objetos">07. Nombrando los objetos</h2>
<p>Ahora importante nombrar las cosas porque vamos a empezara tener muchos <code>objetos</code> y nos podemos confundir. Además, deberemos poder identificarlos en los <code>scripts</code> que crearemos para manipularlos.</p>
<p>Para renombrar un objeto hacéis doble clic o con +F2+. La portería derecha vamos a llamarle en <code>goal1</code> porque va a ser la portería en la que tiene que colar el jugador 1 que va a estar a nuestra izquierda.</p>
<p>Este otro lado de la izquierda pues sería <strong>goal2</strong> adiós con lage mayúscula perfecto porque íbamos a pasar a hacerla línea del centro un poco para que sepamos cuál es el centro todo lo que puedes hacer es duplicar un gol que tenéis vosotros aquí colocado en la posición 0 0 y ahora es reducir un poco</p>
<p>La escala en el eje x podéis reducir la escala también pulsando la +r+ teniendo seleccionado huevas y entonces sancionando vuestro jugador y pulsando deseos pondrá aquí lo que sería el ritmo de escala que es lo que tenéis aquí arriba mismo de movimiento rotación escala y luego otro raro que tienen por aquí que es de escala rotación movimiento todo y vamos para ir a colom seleccionar es el de rotación y</p>
<p>Vamos a reducir esto como es si yo cojo lo quees el eje rojo y lo reduzco o el aumento pues ese aumento se reduce y se ve reflejado en la escala aquí en x vamos a colocarlo a 0 con 2.</p>
<h2 id="08-creando-los-jugadores">08. Creando los jugadores</h2>
<p>Vamos a crear los <code>players</code>. entonces vamos a hacer control de sobre ese amigo aquí de la derecha lo voy a arrastrar a esta posición que de hecho lo vamos a poner en la posición 8 y ahora hay que reducir la escala. Así imaginaros que vuestro <code>player</code> es así de grande en 3 cuando venga la bola va a rebotar sí o sí, al ser demasiado grande.</p>
<h3 id="crear-jugador2">Crear <code>jugador2</code></h3>
<p>Vamos a reducirlo unpoco a lo que sería en el eje y a 2.5 luego pues podemos modificar elmovimiento de la velocidad de la bolapodemos modificar muchas cosas pues paraque se adapte a lo que cada uno puesesté buscando en este caso como está ala derecha pues lo llamaremos player2.</p>
<h3 id="crear-jugador-1">Crear jugador 1</h3>
<p>Ahora ++ctrl+D++ y duplicamos y lo llevamos a la posición contraria que sería -8 y le llamamos player1 para tenerlo ahí bien diferenciado.</p>
<p>Ahora lo único que ayudaría sería pues nuestra pelota del medio así que podemos hacer directamente clic derecho dentro de nuestro <code>Unity</code> su día dietsprite square y si la colocamos en el 0,0.</p>
<p>Para poder diferenciar lo mejor vamos a cambiarle el color y esto lo podéis hacer con todos los objetos en verdad que tengáis en la escena como veis son de tipo sprite renderer por tanto si lo seleccionas podéis modificar aquí el color con lo que tenéis a la derecha.</p>
<p>Yo lo puedo poner pues este color amarillento a la pelota y sin soluciones cualquier otro por ejemplo podéis solucionar asaco y mirar puedo modificar pues todo el mapa en sí de hecho lo vamos a hacer voy a seleccionar el goal escuela y demás y lo vamos a poner en un tono rojizo</p>
<p>Ahora podéis seleccionar vuestro player2 le ponéis otro color. Voy a ponerle un tono verdoso lo mejor paraje verde parece que es como otro no puedo colocar creo que voy a dejar blanco me está gustando más blanco lo voy a dejarblanco los dos pero bueno:</p>
<h2 id="09-componentes-rigidbody">09. Componentes rigidbody</h2>
<p><code>Rigid Body 2D</code> es un componente de <code>Unity</code> que se utiliza para añadir físicas a un objeto 2D. Un <code>Rigid Body 2D</code> le permite a un objeto 2D afectado por la gravedad, el empuje, la fricción y otras fuerzas físicas. Esto permite a los desarrolladores añadir realismo y jugabilidad a los juegos 2D.</p>
<p>Asignaremos los componentes <code> Rigidbody 2D</code>  a nuestros jugadores y a la pelota. Podemos seleccionar todos los objetos y seleccionar el componente <code> Rigidbody 2D</code>  para añadirlo. Al dar a play los objetos con Rigidbody caerán, pues sobre ellos actúa la gravedad. Para quitarles el efecto de la gravedad, donde pone gravity podemos ponerlo a 0 y así ya no se caerán.</p>
<p><img src="file:///e:/Docencia/apuntes/docs/unity/img/Taller de creación de videojuegos8.png" alt=""></p>
<p>Por ejemplo, la <strong>gravedad</strong> afectará la posición del objeto para simular su efecto, haciendo que caiga hacia abajo en el eje Y.</p>
<p>Los <code>rigidbodies</code> son componentes que añadiremos a nuestros <code>players</code> y para nuestra <code>pelota</code> y se encargarán del tema de física para el movimiento.</p>
<ul>
<li>Vamos a seleccionar nuestro <code>player</code> y nuestra <code>bola</code>.</li>
<li>A continuación seleccionamos todos en el componente <code>Rigid Body 2D</code> y ahí le añadimos.</li>
</ul>
<p>Si dejamos esto así tal cual cuando yo le diera el <code>play</code> vais a ver qué los elementos caen. Esto es porque tienen física y por tanto, les afecta la gravedad. En nuestro caso esto no lo queremos.</p>
<p>Lo que tenemos que hacer es dentro de nuestro componente <code>Rigid Body 2D</code>  donde pone <code>gravity</code> es que a uno vamos a ponerlo a 0 y así ya no se caerán.</p>
<h2 id="10-ordenar-objetos">10. Ordenar objetos</h2>
<p>tra cosa que modificando que a lo mejor les ocurre es que la línea del centro se está dibujando por encima de nuestra pelota yeso pues la verdad que no queda muy buena lo mejor sí a lo mejor lo queréis vale pues lo dejáis lo dejáis así si os gusta pues lo dejáis pero si no lo que podéis hacer es se detiene al puesto al bola</p>
<p><img src="file:///e:/Docencia/apuntes/docs/unity/img/Taller de creación de videojuegos11.png" alt=""></p>
<p>En el elemento <code>sprite renderer</code> podemos cambiar el orden. Esto sirve para diferenciar la altura a la que se dibujan las diferentes elementos dentro de nuestra pantalla porque ahora mismo son todo imágenes entonces para saber diferenciar cuál está por delante de una de otra utilizamos el orden y léger. __</p>
<p><strong>Podemos poner un 2 ya se dibuja por encima así que así no habrá problema.</strong></p>
<p>La <code>línea del centro</code> se está dibujando por encima de nuestra <code>pelota</code>.</p>
<p>Para modificarlo, seleccionamos el objeto <code>bola</code> y en el elemento <code>Sprite Renderer</code> en el <code>orden</code> ponemos un número más alto. Esto sirve para diferenciar la altura a la que se dibujan las diferentes elementos dentro de nuestra pantalla. Ahora la <code>bola</code> se dibuja por encima.</p>
<h2 id="11-movimiento-de-personajes">11. Movimiento de personajes</h2>
<p>Ahora vamos a pasar directamente a lo que sería el tema de los movimientos de nuestros personajes. Vamos a hacerlo con:</p>
<ul>
<li>Teclas ++w++ y ++s++ para el jugador 1 (izquierda)</li>
<li>Teclas flecha de arriba y hacia abajo para el <code>jugador2</code> (derecha)</li>
</ul>
<p>De este modo, podremos jugar 2 jugadores en el mismo teclado.</p>
<h2 id="12-redefinir-controles">12. Redefinir controles</h2>
<p>Tenemos que definir pues esos controles y para ello:</p>
<ul>
<li>Nos vamos a ir a <code>edit &gt; project settings</code>.</li>
<li>Donde tenemos <code>input manager</code> tenemos declarado varias cosillas que si no lo vais a expandir el <code>axis</code> y estos son como <code>shortcuts</code> o controles que tiene definido djinnit y para diferentes teclas de nuestro teclado.</li>
<li>En en este caso tenemos <code>horizontal</code> que se encarga de saber cuándo estamos pulsando a la izquierda o derecha de las flechas o el add de nuestro teclado que son las típicas teclas que se utilizan para jugar wsb y las flechas de abajo a la derecha entonces pues con esto sabrá cuando llamemos a la horizontal pues si estamos yendo hacia la izquierda o hacia la derecha pasó lo mismo con arriba o abajo pero en este caso tendríamos el ws y la flecha de arriba y hacia abajo entonces tenemos el vertical y</li>
</ul>
<p>Tendremos que crear el <code>vertical2</code> que es para nuestro <code>jugador2</code> y tenemos que diferenciar pues que uno utilice el ws y el otro utilice la flecha hacia arriba y hacia abajo espero que me haya explicado lo mismo escribano con el culo pero bueno podéis seguir tranquilamente con el vídeo y pues si no queda claro pues lo vamos a ir viendo y seguramente que se entienda entonces seguramente a vosotros os haga aquí <code>down</code> y <code>up</code> y w no y yo salgo aquí s&amp;w y esto es porque el vertical ya pilla directamente tanto la parte izquierda de teclado como la de la derecha pero aquí lo tenemos que diferenciar</p>
<p>En <code>vertical</code> vais a borrar el sw que tenemos aquí y lo que vamos a hacer es <code>duplicarlo</code> para tener un <code>vertical2</code> para nuestro <code>jugador2</code> en cáceres clic derecho duplicate a ride element y se duplicará que vendrá por aquí otra como vertical.</p>
<p>Entonces le vamos a hacer este más blog <code>vertical2</code> y entonces ahora aquí lo que faltaría es cambiarle los controles si ni si el <code>player1</code> juega con la flecha de arriba y hacia abajo nosotros con el <code>jugador2</code> jugaremos con la s w entonces en negativo button tenéis que poner ese y en positivo ton tenía que poner ++w++ ycon eso cuando pasemos al código será muchísimo más sencillo porque además sólo tendremos que hacer un script para los dos players.</p>
<h2 id="13-script-de-programaci%C3%B3n">13. Script de programación</h2>
<p>Los <code>scripts</code> son pequeños programas que controlan el comportamiento de los objetos y la dinámica del juego en <code>Unity</code>.</p>
<p>Estos se crean utilizando el <code>lenguaje C#</code>  y se guardan en archivos con extensión <code>.cs</code>. Para editarlos se utiliza Visual Studio Code, y se guardan dentro de la carpeta <code>assets</code>.</p>
<p>Dentro dela carpeta <code>assets</code> vamos a hacer clic <code>derecho &gt; new folder</code> que vamos a llamar <code>scripts</code> y así tendremos guardados todos nuestros programas en esta carpeta. Para crear un <code>script</code>, hacemos clic derecho en la carpeta y elegimos la opción <code>create C# script</code>.</p>
<p><img src="file:///e:/Docencia/apuntes/docs/unity/2023-02-21-09-46-09.png" alt=""></p>
<p>Ahora vamos a pasar a crear nuestro script vamos aquí a entrar a la carpeta que acabamos de crear y vamos a hacer <code>clic derecho &gt; create C# script</code>. A este script le vamos a llamar <code>Player.cs</code>. Podríamos abrirlo y vamos a utilizar el programa visual studio.</p>
<p><img src="file:///e:/Docencia/apuntes/docs/unity/2023-02-21-09-46-50.png" alt=""></p>
<h3 id="estructura-de-un-script">Estructura de un script</h3>
<p>Los scripts en <code>Unity</code> tienen una estructura básica compuesta por dos partes principales: la parte de declaración de variables, y las funciones.</p>
<p>La parte de <strong>declaración de variables</strong> es donde se definen los campos, variables y propiedades que se usarán en el script.</p>
<p>La segunda parte es la <strong>sección de funciones</strong>, donde se escribe el código que controla el comportamiento de objetos en el juego.</p>
<ul>
<li>La función <code>Start()</code> se llama al comienzo del juego (una vez) y generalmente se usa para inicializar variables y configurar el estado inicial del objeto.</li>
<li>La función <code>Update()</code> se llama una vez por frame y se usa para actualizar el estado del objeto.</li>
</ul>
<p>Además de estas dos funciones, podemos crear todas las funciones que queramos para controlar el comportamiento de un objeto, desde eventos de entrada (como cuando un usuario presiona una tecla) hasta eventos de salida (como cuando un objeto sale del juego). Estas funciones se pueden llamar en el script para ejecutar el código deseado.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">using</span> System.Collections;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">using</span> UnityEngine;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">NewBehaviourScript</span> : <span class="hljs-title">MonoBehaviour</span>
{
    <span class="hljs-comment">// Start is called before the first frame update</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span>
    {

    }

    <span class="hljs-comment">// Update is called once per frame</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span>
    {

    }
}
</div></code></pre>
<h3 id="errores-de-programaci%C3%B3n">Errores de programación</h3>
<p>Los errores de programación más comunes en <code>Unity</code> son errores de sintaxis. Estos se producen cuando el programador escribe algo de forma incorrecta, por ejemplo, olvidarse de poner ; al final de las líneas o cerrar un }, o escribiendo mal mayúsculas o minúsculas.</p>
<p>Si hay errores de sintaxis, <code>Unity</code> no podrá ejecutar el juego correctamente, por lo que el programador debe solucionar los errores antes de poder continuar.</p>
<p>Algunas de las formas más comunes de solucionar estos errores son comprobar el código con cuidado, revisar la documentación para asegurarse de que está escribiendo cada línea correctamente</p>
<p><img src="file:///e:/Docencia/apuntes/docs/unity/img/Taller de creación de videojuegos27.png" alt=""></p>
<h3 id="crear-script-players">Crear script players</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">using</span> System.Collections;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">using</span> UnityEngine;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Players</span> : <span class="hljs-title">MonoBehaviour</span>
{

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> player1;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> speed = <span class="hljs-number">3</span>;
    <span class="hljs-keyword">public</span> Rigidbody2D rb;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">float</span> move;
    <span class="hljs-keyword">private</span> Vector2 startPos;

    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span>
    {
        startPos = transform.position;
    }
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span>
    {
        <span class="hljs-keyword">if</span>(player1)
        {
            move = Input.GetAxisRaw(<span class="hljs-string">"Vertical"</span>);
        }

        <span class="hljs-keyword">else</span>
        {
            move = Input.GetAxisRaw(<span class="hljs-string">"Vertical2"</span>);
        }

        rb.velocity = <span class="hljs-keyword">new</span> Vector2(rb.velocity.x, move*speed );
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Reset</span>(<span class="hljs-params"></span>)</span>
    {
        rb.velocity = Vector2.zero;
        transform.position = startPos;
    }
}
</div></code></pre>
<h2 id="14-asignar-script-al-jugador">14. Asignar script al jugador</h2>
<p>Para que un script tenga efecto, hay que <code>asignar</code> el script a uno o más objetos. Para ello los scripts se arrastran y sueltan sobre los objetos que queremos que los utilicen.</p>
<p>Cada vez que volvamos a <code>Unity</code> después de modificar nuestros scripts, se recargará el proyecto para incluir los cambios.</p>
<p>En el caso de haber errores de programación, deberemos primero subsanarlos.</p>
<p>Una vez terminado, podemos asignar el script <code>player.cs</code> a los objetos <code>player1</code> y <code>player2</code>, arrastrándolos y soltándolos sobre estos objetos.</p>
<h2 id="cambiar-el-booleano-para-player2">Cambiar el booleano para player2</h2>
<p><img src="file:///e:/Docencia/apuntes/docs/unity/2023-02-21-11-25-50.png" alt=""></p>
<h2 id="asignar-rigidbody-al-script">Asignar rigidbody al script</h2>
<p><img src="file:///e:/Docencia/apuntes/docs/unity/2023-02-21-11-26-35.png" alt=""></p>
<h2 id="crear-m%C3%A9todo-reset-en-el-script">Crear método reset en el script</h2>
<p><img src="file:///e:/Docencia/apuntes/docs/unity/2023-02-21-11-28-04.png" alt=""></p>
<h2 id="crear-script-para-la-pelota">Crear script para la pelota</h2>
<p>Crearemos un script para la pelota al que llamaremos <code>ball.cs</code>.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">using</span> System.Collections;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">using</span> UnityEngine;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Goal</span> : <span class="hljs-title">MonoBehaviour</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> player1Goal;
    <span class="hljs-keyword">public</span> GameObject gameManager;

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnTriggerEnter2D</span>(<span class="hljs-params">Collider2D collision</span>)</span>
    {
        <span class="hljs-keyword">if</span>(collision.CompareTag(<span class="hljs-string">"Ball"</span>))
        {

            <span class="hljs-keyword">if</span> (player1Goal)
            {
                gameManager.GetComponent&lt;GameManager&gt;().Player1Scored();
            }

            <span class="hljs-keyword">else</span>
            {
                gameManager.GetComponent&lt;GameManager&gt;().Player2Scored();
            }
        }
    }
}
</div></code></pre>
<h2 id="asignar-script-a-la-bola">Asignar script a la bola</h2>
<h2 id="asignar-el-rigibody">Asignar el rigibody</h2>
<p><img src="file:///e:/Docencia/apuntes/docs/unity/2023-02-21-11-36-16.png" alt=""></p>
<h2 id="crear-material-para-la-pelota">Crear material para la pelota</h2>
<p><img src="file:///e:/Docencia/apuntes/docs/unity/2023-02-21-11-36-57.png" alt=""></p>
<p><img src="file:///e:/Docencia/apuntes/docs/unity/2023-02-21-11-37-23.png" alt=""></p>
<h2 id="restringir-movimientos-en-los-players">Restringir movimientos en los players</h2>
<p>Solo queremos que los jugadores se muevan en un eje, por lo que restringimos los otros dos.</p>
<p><img src="file:///e:/Docencia/apuntes/docs/unity/2023-02-21-11-38-12.png" alt=""></p>
<h2 id="reorganizar-archivos">Reorganizar archivos</h2>
<p><img src="file:///e:/Docencia/apuntes/docs/unity/2023-02-21-11-45-01.png" alt=""></p>
<h2 id="crear-interfaz-puntuaci%C3%B3n">Crear interfaz puntuación</h2>
<p>Crearemos las puntuaciones. Al crear una UI, este objeto se nos pondrá dentro de una carpeta <code>canvas</code>.</p>
<p><img src="file:///e:/Docencia/apuntes/docs/unity/2023-02-21-11-46-04.png" alt=""></p>
<h2 id="cambiar-posici%C3%B3n">Cambiar posición</h2>
<p><img src="file:///e:/Docencia/apuntes/docs/unity/2023-02-21-11-47-30.png" alt=""></p>
<p>Una vez creado el texto y colocado, lo duplicaremos para tener dos objetos texto, a los que modificaremos el nombre y se llamarán <code>Player1Text</code> y <code>Player2Text</code>.</p>
<h2 id="cambiar-pelota-y-hacerla-redonda">Cambiar pelota y hacerla redonda</h2>
<p>En el <code>Sprite Renderer</code> tenéis que cambiar la propiedad <code>Sprite</code> por un círculo.</p>
<h2 id="crear-el-script-del-juego">Crear el script del juego</h2>
<p>Crearemos un <code>script</code> que llamaremos <code>GameManager</code> (veréis que cambia el icono por un engranaje).</p>
<p>Borraremos los métodos <code>start()</code> y <code>update()</code>.</p>
<p>Crearemos los métodos <code>Player1Scored()</code> y <code>Player1Scored()</code>.</p>
<p>Al marcar un gol:</p>
<ol>
<li>La pelota vuelve al centro</li>
<li>Las palas vuelven a su posición iniciar</li>
<li>Cambiamos los valores del marcador</li>
</ol>
<p><code>ResetPosition()</code> será un método que resteará los objetos.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">using</span> System.Collections;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">using</span> UnityEngine;
<span class="hljs-keyword">using</span> UnityEngine.UI;
<span class="hljs-keyword">using</span> UnityEngine.SceneManagement;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">GameManager</span> : <span class="hljs-title">MonoBehaviour</span>
{
    <span class="hljs-keyword">public</span> GameObject bola;
    <span class="hljs-keyword">public</span> GameObject player1;
    <span class="hljs-keyword">public</span> GameObject player1goal1;
    <span class="hljs-keyword">public</span> GameObject player2;
    <span class="hljs-keyword">public</span> GameObject player2goal2;

    <span class="hljs-keyword">public</span> Text player1Text;
    <span class="hljs-keyword">public</span> Text player2Text;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> player1Score;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> player2Score;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> IAGame;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> maxScore = <span class="hljs-number">7</span>;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">CheckVictory</span>(<span class="hljs-params"></span>)</span>
    {
        <span class="hljs-keyword">if</span>(player1Score &gt;= maxScore){
            SceneManager.LoadScene(<span class="hljs-string">"VictoryPlayer1"</span>);
        }

        <span class="hljs-keyword">if</span>(player2Score &gt;= maxScore){
            SceneManager.LoadScene(<span class="hljs-string">"VictoryPlayer2"</span>);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Player1Scored</span>(<span class="hljs-params"></span>)</span>
    {
        player1Score++;
        player1Text.text = player1Score.ToString();
        CheckVictory();
        ResetPosition();
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Player2Scored</span>(<span class="hljs-params"></span>)</span>
    {
        player2Score++;
        player2Text.text = player2Score.ToString();
        CheckVictory();
        ResetPosition();
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ResetPosition</span>(<span class="hljs-params"></span>)</span>
    {
        <span class="hljs-keyword">if</span> (IAGame)
        {
            bola.GetComponent&lt;Ball&gt;().Reset();;
            player2.GetComponent&lt;Players&gt;().Reset();
        }
        <span class="hljs-keyword">else</span>
        {
            bola.GetComponent&lt;Ball&gt;().Reset();;
            player2.GetComponent&lt;Players&gt;().Reset();
            player1.GetComponent&lt;Players&gt;().Reset();
        }
    }
}
</div></code></pre>
<h2 id="a%C3%B1adir-las-referencias-a-objetos">Añadir las referencias a objetos</h2>
<p>Arrastraremos todos los objetos a las propiedades del script <code>GameManager</code>.</p>
<h2 id="marcar-trigger-en-las-porter%C3%ADas">Marcar trigger en las porterías</h2>
<p>Necesitamos marcar la opción <code>is Trigger</code> del componente <code>Box Collider 2D</code>.</p>
<h2 id="crear-script-para-las-porter%C3%ADas">Crear script para las porterías</h2>
<p>Creamos un script llamado <code>Goal.cs</code>.  Utilizaremos el método <code>OnTriggerEnter2D()</code> para detectar colisión entre la pelota y alguna de las porterías.</p>
<p><code>CompareTag</code> comprobará si el objeto que colisiona es la bola y, en caso de ser así, según si colisiona con <code>Goal1</code> o con <code>Goal2</code> cambiaremos la puntuación correspondiente.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">using</span> System.Collections;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">using</span> UnityEngine;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Goal</span> : <span class="hljs-title">MonoBehaviour</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> player1Goal;
    <span class="hljs-keyword">public</span> GameObject gameManager;

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnTriggerEnter2D</span>(<span class="hljs-params">Collider2D collision</span>)</span>
    {
        <span class="hljs-keyword">if</span>(collision.CompareTag(<span class="hljs-string">"Ball"</span>))
        {

            <span class="hljs-keyword">if</span> (player1Goal)
            {
                gameManager.GetComponent&lt;GameManager&gt;().Player1Scored();
            }

            <span class="hljs-keyword">else</span>
            {
                gameManager.GetComponent&lt;GameManager&gt;().Player2Scored();
            }
        }
    }
}
</div></code></pre>
<h2 id="asignar-scripts">Asignar scripts</h2>
<p>Vamos a asignar el script creado a <code>Goal1</code> y a <code>Goal2</code> y marcamos en <code>Goal1</code> el check player1goal.</p>
<h2 id="asignar-etiqueta-a-la-bola">Asignar etiqueta a la bola</h2>
<p>Necesitamos asignar el <code>tag</code> que llamaremos <code>ball</code> al objeto pelota, seleccionando en <code>Tag</code> y <code>Add Tag</code>.</p>
<h2 id="crear-referencias">Crear referencias</h2>
<p>Nos hemos dejado crear referencias en el script <code>Goal.cs</code>. Una vez lo hayamos hecho, arrastramos <code>GameManager</code> a las referencias.</p>
<h2 id="cambiar-colores">Cambiar colores</h2>
<p>Utilizar la página <code>coolors</code> para elegir paletas.</p>
<h2 id="inteligencia-artificial">Inteligencia artificial</h2>
<p>Vamos a hacer que un jugador sea controlado por la máquina.
Crear el script <code>IA.cs</code> y la completamos.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">using</span> System.Collections;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">using</span> UnityEngine;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">IA</span> : <span class="hljs-title">MonoBehaviour</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> speed=<span class="hljs-number">3</span>;
    <span class="hljs-keyword">public</span> GameObject ball;
    <span class="hljs-keyword">private</span> Vector2 ballPos;

    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span>
    {
        Move();
    }

    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Move</span>(<span class="hljs-params"></span>)</span> {
        ballPos = ball.transform.position;

        <span class="hljs-keyword">if</span> (transform.position.y &gt; ballPos.y)
        {
            transform.position += <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">0</span>, -speed*Time.deltaTime);
        }

        <span class="hljs-keyword">if</span> (transform.position.y &lt; ballPos.y)
        {
            transform.position += <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">0</span>, speed*Time.deltaTime);
        }
    }
}
</div></code></pre>
<p>Una vez completado el script.</p>
<p>Asignamos el script <code>IA.cs</code> a <code>Player1</code> y desamarcamos el checkbox del scripts <code>Players</code> para que no interfiera.</p>
<p>Arrastramos la referencia de <code>Bola</code> al script.</p>
<p>Crear variable en <code>GameManager</code> para decidir si el juego es PvP o PvsPC. Será un booleano. En <code>ResetPosition()</code> miraremos este valor para decidir resetear o no.</p>
<p>Seleccionar el objeto <code>GameManager</code>  y marcar la opción <code>IA Game</code>.</p>
<h2 id="crear-men%C3%BA">Crear menú</h2>
<p>Necesitaremos 3 escenas. Ahora solo tenemos la escena <code>Main</code>. La vamos a llamar <code>PlayerVSIA</code> para diferenciarla.</p>
<p>La duplicamos y le llamamos <code>PlayerVSPlayer</code>. En esta escena, desmarcamos el check de <code>IA Game</code>.</p>
<p>Creamos una escena 2D nueva yendo a <code>File &gt; New scene &gt; 2D</code>.</p>
<h3 id="crear-botones">Crear botones</h3>
<p>Crear botón. Clic derecho en <code>Hierarchy</code> y <code>Create &gt; UI &gt; Button</code>.</p>
<p>El botón se hará grande o pequeño según la resolución y el aspect ratio. Si queremos fijar su tamaño, haremos lo siguiente.</p>
<p>Iremos al objeto <code>Canvas</code> en el que se ha creado el botón y en el componente <code>Canvas Scaler</code> vamos a la propiedad <code>UI Scale Mode</code> y elegimos <code>Scale With Screen Size</code>.</p>
<p>Duplicamos el botón y le colocamos el texto <code>Player VS Player</code>. Lo movemos y lo situamos.</p>
<h3 id="colocar-texto-con-nombre-del-juego">Colocar texto con nombre del juego</h3>
<p>Pondremos un texto y le cambiaremos el texto por PONG, y lo haremos más grande. Para evitar problemas al hacerlo grande o pequeño, vamos al <code>inspector</code> y buscamos en paragraph las opciones <code>horizontal overflow</code> y <code>vertical overflow</code> y les asignamos el valor <code>overflow</code>.</p>
<p>Lo hacemos grande y lo situamos.</p>
<p>Guardamos la escena (que ahora se llama <code>Untitled*</code>) con +ctrl+ y +s+  y le llamaremos <code>MainMenu</code>.</p>
<h2 id="crear-script-mainmenucs">Crear script MainMenu.cs</h2>
<pre class="hljs"><code><div><span class="hljs-keyword">using</span> System.Collections;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">using</span> UnityEngine;
<span class="hljs-keyword">using</span> UnityEngine.SceneManagement;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MainMenu</span> : <span class="hljs-title">MonoBehaviour</span>
{

    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span>
    {
        <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.Escape))
        {
            Application.Quit();
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">PlayerVSIA</span>(<span class="hljs-params"></span>)</span>{
        SceneManager.LoadScene(<span class="hljs-string">"PlayerVSIA"</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">PlayerVSPlayer</span>(<span class="hljs-params"></span>)</span>{
        SceneManager.LoadScene(<span class="hljs-string">"PlayerVSPlayer"</span>);
    }
}
</div></code></pre>

</body>
</html>
